import { Canvas, Meta, Story } from '@storybook/addon-docs';
import icons from '../../../assets/images/icons.svg';

<Meta title="UI/Data/Forms" />

# Forms

**See inputs & labels for examples of using inputs of various types.**

When using form elements in a form, they should always be wrapped in a list element, as this indicates to the user that all the elements are closely related to each other. This also gives us the opportunity to apply some layout, such as adding space between elements.

Form elements will take 100% of the available width, so you’ll likely want to constrain them within a grid or flex layout system to make that more readable and usable.

Here are some examples using the grid utility classes to create common form layouts.

<details class="u-margin-l3-y">
  <summary class="u-h4 u-font-medium">Examples use</summary>
  <ul>
    <li>
      <a href="/docs/atoms-card--card">a-card</a>
    </li>
    <li>
      <a href="/docs/atoms-content--content">a-content</a>
    </li>
    <li>
      <a href="/docs/atoms-flash--flash-brand-1">a-flash</a>
    </li>
    <li>
      <a href="/docs/atoms-icon--icon">a-icon</a>
    </li>
    <li>
      <a href="/docs/atoms-list-reset--list-reset">u-list-none</a>
    </li>
    <li>
      <a href="/docs/utilities-color--brand-1">u-fg</a>
    </li>
    <li>
      <a href="/docs/utilities-flex--flex">u-flex</a>
    </li>
    <li>
      <a href="/docs/utilities-font--font-medium">u-font</a>
    </li>
    <li>
      <a href="/docs/utilities-box-alignment--items-center">u-items-center</a>
    </li>
    <li>
      <a href="/docs/utilities-box-alignment--justify-end">u-justify</a>
    </li>
    <li>
      <a href="/docs/utilities-margin--margin-m">u-margin</a>
    </li>
    <li>
      <a href="/docs/utilities-padding--padding-m">u-padding</a>
    </li>
  </ul>
</details>

## Login form

<Canvas>
  <Story name="Login form">
    {`
      <div class="a-content a-content--s">
        <form class="a-card-l@m u-bg-white" method="POST" action="">
          <h2>Login</h2>
          <ul class="u-list-none u-margin-l3-bottom">
            <li class="u-margin-m-bottom">
              <label for="email">Email</label>
              <input id="email" type="email" autocomplete="email" />
            </li>
            <li class="u-margin-m-bottom u-flex u-flex-col">
              <label for="password">Password</label>
              <input id="password" type="password" autocomplete="current-password" />
              <div class="u-flex u-justify-end u-margin-s4-top">
                <a href="/">Forgot password?</a>
              </div>
            </li>
          </ul>
          <ul class="u-list-none u-flex u-items-center">
            <li class="u-margin-l3-right">
              <button type="submit" class="a-button">Login</button>
            </li>
            <li>
              <a href="/">or sign up</a>
            </li>
          </ul>
        </form>
      </div>
    `}
  </Story>
</Canvas>

## Login form with errors

When a user submits a form without fulfilling all the requirements (e.g. some required fields are empty, or fields have malformed data entered):

- add the `aria-invalid="true"` attribute to the input
- add a sibling element containing a description of what went wrong
- Connect that sibling element to the input by adding an `aria-describedby="hint-element-id"` attribute to the input, and `id="hint-element-id"` (choose your own id!) to the hint’s element

The `aria-describedby` attribute accepts a space-separated list of IDs, so if an input is already “described by” a short hint on requirements for filling it out, you can add your element with the error description, and append its ID to the `aria-describedby` attribute. Conversely, multiple inputs might be described by the same element, though normally each input would get its own hint or error notification so that the two are visually close.

<Canvas>
  <Story name="Login form with errors">
    {`
      <div class="a-content a-content--s">
        <form class="a-card-l@m u-bg-white" method="POST" action="">
          <div class="a-card-l__header@m a-flash" role="alert" data-theme="warning">
            <div class="u-flex u-items-center">
              <svg width="14" height="14" class="a-icon a-icon--m u-flex-shrink-0 u-margin-m-right" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
                <use xlink:href="${icons}#icon-exclamation"></use>
              </svg>
              There was a problem logging in
            </div>
          </div>
          <h2>Login</h2>
          <ul class="u-list-none u-margin-l3-bottom">
            <li class="u-margin-m-bottom">
              <label for="email">Email</label>
              <input id="email" type="email" autocomplete="email" aria-invalid="true" aria-describedby="email-help-text" />
              <span id="email-help-text" class="u-fg-warning u-margin-s4-top">Missing email address</span>
            </li>
            <li class="u-margin-m-bottom u-flex u-flex-col">
              <label for="password">Password</label>
              <input id="password" type="password" autocomplete="current-password" />
              <div class="u-flex u-justify-end u-margin-s4-top">
                <a href="/">Forgot password?</a>
              </div>
            </li>
          </ul>
          <ul class="u-list-none u-flex u-items-center">
            <li class="u-margin-l3-right">
              <button type="submit" class="a-button">Login</button>
            </li>
            <li>
              <a href="/">or sign up</a>
            </li>
          </ul>
        </form>
      </div>
    `}
  </Story>
</Canvas>

## Sign up form

This form has the commonly-required fields for creating an account. Note the wording “Create account” — it’s easier to distinguish from “signin/login”. `autocomplete` attributes allow the user’s password manager to create secure login credentials.

<Canvas>
  <Story name="Sign up form">
    {`
      <div class="a-content a-content--s">
        <form class="a-card-l@m u-bg-white" method="POST" action="">
          <h2>Create an account</h2>
          <ul class="u-list-none u-margin-l3-bottom">
            <li class="u-margin-m-bottom">
              <label for="email">Email</label>
              <input id="email" type="email" autocomplete="email" />
            </li>
            <li class="u-margin-m-bottom">
              <label for="password">Password</label>
              <input id="new-password" type="password" autocomplete="new-password" />
            </li>
            <li class="u-margin-m-bottom">
              <label for="confirm_password">Confirm password</label>
              <input id="confirm_password" type="password" autocomplete="new-password" />
            </li>
          </ul>
          <ul class="u-list-none u-flex u-items-center">
            <li class="u-margin-l3-right">
              <button type="submit" class="a-button">Create account</button>
            </li>
            <li>
              <a href="/">or login</a>
            </li>
          </ul>
        </form>
      </div>
    `}
  </Story>
</Canvas>

## Complex, multi-section form

For a more complex form, `.u-grid-cols-6@m` allows for fields of different sizes on larger screens. Combine it width fieldsets, legends, and the [bordered-header](/docs/atoms-bordered-header--bordered-header) atom.

<Canvas>
  <Story name="Complex, multi-section form">
    {`
      <form action="" method="POST" class="a-content">
        <h2>Profile</h2>
        <fieldset class="u-margin-l3-bottom u-padding-l3-bottom">
          <div class="a-bordered-header u-margin-l3-bottom">
            <legend class="u-h3 u-font-bold">Account details</legend>
          </div>
          <div class="u-grid u-gap-m u-grid-cols-6@l">
            <ul class="u-list-none u-col-start-3@l u-grid u-gap-m u-grid-cols-6@m u-col-span-4@l">
              <li class="u-col-span-4@m u-col-start-1@m u-col-span-3@l">
                <label for="name">Name</label>
                <input id="name" type="text" autocomplete="name" value="Jon Doe" />
              </li>
              <li class="u-col-span-4@m u-col-start-1@m u-col-span-3@l">
                <label for="email">Email</label>
                <input id="email" type="text" autocomplete="email" value="jon.doe@gmx.de" />
              </li>
              <li class="u-col-start-1@m u-col-span-2@m">
                <label for="type">Account type</label>
                <select id="type">
                  <option value="user">User</option>
                  <option value="admin">Admin</option>
                </select>
              </li>
            </ul>
          </div>
        </fieldset>
        <fieldset class="u-margin-l3-bottom u-padding-l3-bottom">
          <div class="a-bordered-header u-margin-l3-bottom">
            <legend class="u-h3 u-font-bold a-bordered-header">Address</legend>
          </div>
          <div class="u-grid u-gap-m u-grid-cols-6@l">
            <div class="u-col-span-2@l">
              <p class="u-h6 u-fg-grayscale-light-1 u-padding-l2-y@l u-padding-l3-right@m">Some intro text can go here, to describe this section</p>
            </div>
            <ul class="u-list-none u-col-start-3@l u-col-span-4@l u-grid u-gap-m u-grid-cols-6@m">
              <li class="u-col-span-4@m u-col-span-3@l">
                <label for="street">Street</label>
                <input id="street" type="text" autocomplete="address-line1" />
              </li>
              <li class="u-col-span-2@m u-col-span-1@l">
                <label for="house">House Nr.</label>
                <input id="house" type="text" />
              </li>
              <li class="u-col-start-1@m u-col-start-1@l u-col-span-3@m">
                <label for="city">City</label>
                <input id="city" type="text" autocomplete="address-line2" />
              </li>
              <li class="u-col-span-3@m">
                <label for="country">Country</label>
                <input id="country" type="text" autocomplete="country-name" />
              </li>
              <li class="u-col-span-2@m">
                <label for="postal-code">Postal code</label>
                <input id="postal-code" type="text" autocomplete="postal-code" />
              </li>
            </ul>
          <div>
        </fieldset>
        <div class="u-grid u-gap-m u-grid-cols-6@l u-margin-l3-bottom">
          <ul class="u-list-none u-flex u-items-center u-col-start-3@l u-col-span-4@l">
            <li class="u-margin-l2-right">
              <button type="submit" class="a-button">Save changes</button>
            </li>
            <li>
              <a href="/"> or cancel</a>
            </li>
          </ul>
        </div>
      </form>
    `}
  </Story>
</Canvas>

## Simple resource editing

Some forms are always going to be small and simple, with just a few text inputs and nothing else.

<Canvas>
  <Story name="Simple resource editing">
    {`
      <form action="" method="POST" class="a-content">
        <fieldset>
          <legend class="u-sr-only">User LKJHAS786SGLKJHAFGO7YEGKJBF</legend>
          <div class="u-grid u-gap-m u-grid-cols-6@l u-margin-l3-bottom">
            <ul class="u-list-none u-grid u-gap-m u-grid-cols-6@m u-col-span-4@l">
              <li class="u-col-span-4@m u-col-start-1@m">
                <label for="name">Name</label>
                <input id="name" type="text" autocomplete="name" value="Jon Doe" />
              </li>
              <li class="u-col-span-4@m u-col-start-1@m">
                <label for="email">Email</label>
                <input id="email" type="text" autocomplete="email" value="jon.doe@gmx.de" />
              </li>
            </ul>
          </div>
        </fieldset>
        <ul class="u-list-none u-flex u-items-center u-margin-l3-bottom">
          <li class="u-margin-l2-right">
            <button type="submit" class="a-button">Save changes</button>
          </li>
          <li>
            <a href="/"> or cancel</a>
          </li>
        </ul>
      </form>
    `}
  </Story>
</Canvas>

## Search form

The `role="search"` attribute highlights this functionality for screenreader users. The label element is present, but visually hidden using `.u-sr-only`.

<Canvas>
  <Story name="Search form">
    {`
    <form role="search" action="" method="POST">
      <label for="search" class="u-sr-only">Search users</label>
      <div class="u-flex o-joined-ui">
        <input type="search" id="search" placeholder="Username or email…" class="u-flex-grow-1" />
        <button type="submit" class="a-button a-button--outline">Search</button>
      </div>
    </form>
    `}
  </Story>
</Canvas>

<Canvas>
  <Story name="Search form with icon button">
    {`
    <form role="search" action="" method="POST">
      <label for="search" class="u-sr-only">Search users</label>
      <div class="u-flex o-joined-ui">
        <input type="search" id="search" placeholder="Username or email…" class="u-flex-grow-1" />
        <button type="submit" class="a-button a-button--outline" title="Search users">
          <svg width="18" height="18" class="a-icon" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
            <use xlink:href="${icons}#icon-search"></use>
          </svg>
          <span class="u-sr-only">Search</span>
        </button>
      </div>
    </form>
    `}
  </Story>
</Canvas>

## Form with select, input, & button

The heights of selects, inputs, and buttons should all match, allowing them to be placed side by side.

<Canvas>
  <Story name="Select input and button">
    {`
    <form role="search" action="" method="POST" class="u-flex">
      <ul class="u-list-none u-flex u-items-end">
        <li class="u-margin-s4-right">
          <label for="filter">Search users</label>
          <input type="search" id="filter" placeholder="Username or email…" />
        </li>
        <li class="u-margin-s4-right">
          <select id="type">
            <option value="user">User</option>
            <option value="admin">Admin</option>
          </select>
        </li>
        <li>
          <button type="submit" class="a-button a-button--outline">Search</button>
        </li>
      </ul>
    </form>
    `}
  </Story>
</Canvas>
