import { Canvas, Meta, Story } from '@storybook/addon-docs';
import icons from '../../../assets/images/icons.svg';

<Meta title="UI/Navigation/Dropdown menu" />

# Dropdown menu

A button that when clicked reveals a floating menu of links. This is a combination of an `.a-button--secondary` as the button that is clicked to show/hide the menu, an `.a-dropdown` menu that’s the container for a series of `.a-button--transparent` sub-items.

The component requires JS to show and hide the `ul`, and update the aria attributes when the user clicks the `.a-button--secondary`.

<div class="u-bg-grayscale-light-1 u-padding-m-x u-padding-s4-y">
  <p>
    These examples use AlpineJS for the behavior. If you’re using a different JS
    package, replace the blocks of html attributes starting with `x-`, and with
    `@click`.
  </p>
</div>

<details class="u-margin-l3-y">
  <summary class="u-h4 u-font-medium">Examples use</summary>
  <ul>
    <li>
      <a href="/docs/atoms-button-base--button-element">a-button</a>
    </li>
    <li>
      <a href="/docs/'atoms-button-secondary--secondary">a-button--secondary</a>
    </li>
    <li>
      <a href="/docs/atoms-button-menu--menu">a-button--transparent</a>
    </li>
    <li>
      <a href="/docs/atoms-dropdown--dropdown">a-dropdown</a>
    </li>
    <li>
      <a href="/docs/utilities-flex--flex">u-flex</a>
    </li>
    <li>
      <a href="/docs/utilities-box-alignment--items-center">u-items-center</a>
    </li>
    <li>
      <a href="/docs/atoms-icon--icon">a-icon</a>
    </li>
    <li>
      <a href="/docs/atoms-list-reset--list-reset">u-list-none</a>
    </li>
    <li>
      <a href="/docs/utilities-typography--typography">u-h6</a>
    </li>
    <li>
      <a href="/docs/utilities-color--brand-1">u-fg</a>
    </li>
    <li>
      <a href="/docs/utilities-margin--margin-m">u-margin</a>
    </li>
    <li>
      <a href="/docs/utilities-overflow--overflow-y">u-overflow-y-auto</a>
    </li>
    <li>
      <a href="/docs/utilities-padding--padding-m">u-padding</a>
    </li>
    <li>
      <a href="/docs/utilities-relative--relative">u-relative</a>
    </li>
  </ul>
</details>

## Default

These examples show various contents for the dropdown menus — what you put in it is up to you, but things to note are:

- the `<li role="separator"></li>` that provide visual and semantic separators
- the standard menu items are likely to be created using `.a-button.a-button--transparent`

<Canvas>
  <Story name="Dropdown menu">
    {`
      <div style="min-height:20rem;">
        <div class="u-relative" x-data="{ dropdownOpen: false }">
          <button
            type="button"
            class="a-button a-button--secondary"
            aria-controls="dropdown-1"
            @click="dropdownOpen = !dropdownOpen"
            :aria-expanded="dropdownOpen"
          >
            <span class="a-button__label">Account</span>
            <svg width="14" height="14" class="a-button__icon a-icon a-icon-m" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
              <use xlink:href="${icons}#icon-caret-down"></use>
            </svg>
          </button>
          <ul
            x-show="dropdownOpen"
            x-transition:enter="is-transitioning"
            x-transition:enter-start="is-off-screen"
            x-transition:enter-end="is-on-screen"
            x-transition:leave="is-transitioning"
            x-transition:leave-start="is-on-screen"
            x-transition:leave-end="is-off-screen"
            @click.away="dropdownOpen = false"
            class="a-dropdown u-overflow-y-auto u-list-none u-margin-s2-top"
            id="dropdown-1"
          >
            <li>
              <a href="/" class="a-button a-button--transparent">
                <svg width="14" height="14" class="a-button__icon a-icon a-icon-m" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
                  <use xlink:href="${icons}#icon-plus"></use>
                </svg>
                <span class="a-button__label">Settings</span>
              </a>
            </li>
            <li>
              <a href="/" class="a-button a-button--transparent">
                <svg width="14" height="14" class="a-button__icon a-icon a-icon-m" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
                  <use xlink:href="${icons}#icon-plus"></use>
                </svg>
                <span class="a-button__label">Help</span>
              </a>
            </li>
            <li>
              <a href="/" class="a-button a-button--transparent">
                <svg width="14" height="14" class="a-button__icon a-icon a-icon-m" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
                  <use xlink:href="${icons}#icon-plus"></use>
                </svg>
                <span class="a-button__label">Privacy</span>
              </a>
            </li>
            <li role="separator"></li>
            <li>
              <a href="/" class="a-button a-button--transparent">
                <svg width="14" height="14" class="a-button__icon a-icon a-icon-m" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
                  <use xlink:href="${icons}#icon-plus"></use>
                </svg>
                <span class="a-button__label">Sign out</span>
              </a>
            </li>
          </ul>
        </div>
      </div>
    `}
  </Story>
  <Story name="Dropdown with avatar user-profile link">
    {`
      <div style="min-height:20rem;">
        <div class="u-relative" x-data="{ dropdownOpen: false }">
          <button
            type="button"
            class="a-button a-button--secondary"
            aria-controls="dropdown-2"
            @click="dropdownOpen = !dropdownOpen"
            :aria-expanded="dropdownOpen"
          >
            <span class="a-button__label">Account</span>
            <svg width="14" height="14" class="a-button__icon a-icon a-icon-m" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
              <use xlink:href="${icons}#icon-caret-down"></use>
            </svg>
          </button>
          <ul
            x-show="dropdownOpen"
            x-transition:enter="is-transitioning"
            x-transition:enter-start="is-off-screen"
            x-transition:enter-end="is-on-screen"
            x-transition:leave="is-transitioning"
            x-transition:leave-start="is-on-screen"
            x-transition:leave-end="is-off-screen"
            @click.away="dropdownOpen = false"
            class="a-dropdown u-overflow-y-auto u-list-none u-margin-s2-top"
            id="dropdown-2"
          >
            <li>
              <a href="/" class="a-button a-button--transparent">
                <div class="a-button__avatar a-avatar a-avatar--l u-flex-shrink-0 u-flex u-items-center">
                  <img src="https://placehold.co/100x100" width="46" height="46" alt="Username’s avatar" />
                </div>
                <div class="a-button__label u-flex u-flex-col u-items-start">
                  <span>Signed in as</span>
                  <span>Username</span>
                </div>
              </a>
            </li>
            <li role="separator"></li>
            <li>
              <a href="/" class="a-button a-button--transparent">
                Settings
              </a>
            </li>
            <li>
              <a href="/" class="a-button a-button--transparent">
                Help
              </a>
            </li>
            <li>
              <a href="/" class="a-button a-button--transparent">
                Privacy
              </a>
            </li>
            <li role="separator"></li>
            <li>
              <a href="/" class="a-button a-button--transparent">
                Sign out
              </a>
            </li>
          </ul>
        </div>
      </div>
    `}
  </Story>
  <Story name="Dropdown with non-button/link content">
    {`
      <div style="min-height:20rem;">
        <div class="u-relative" x-data="{ dropdownOpen: false }">
          <button
            type="button"
            class="a-button a-button--secondary"
            aria-controls="dropdown-3"
            @click="dropdownOpen = !dropdownOpen"
            :aria-expanded="dropdownOpen"
          >
            <span class="a-button__label">Account</span>
            <svg width="14" height="14" class="a-button__icon a-icon a-icon-m" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
              <use xlink:href="${icons}#icon-caret-down"></use>
            </svg>
          </button>
          <ul
            x-show="dropdownOpen"
            x-transition:enter="is-transitioning"
            x-transition:enter-start="is-off-screen"
            x-transition:enter-end="is-on-screen"
            x-transition:leave="is-transitioning"
            x-transition:leave-start="is-on-screen"
            x-transition:leave-end="is-off-screen"
            @click.away="dropdownOpen = false"
            class="a-dropdown u-overflow-y-auto u-list-none u-margin-s2-top"
            id="dropdown-3"
          >
            <li>
              <div class="u-padding-s4-top u-padding-s4-bottom u-padding-s2-left u-padding-s2-right u-flex u-items-center u-h6 u-line-height-min">
                <div class="a-avatar a-avatar--l u-flex-shrink-0 u-flex u-items-center u-margin-s2-right">
                  <img src="https://placehold.co/100x100" width="46" height="46" alt="Username’s avatar" />
                </div>
                <div class="u-flex-shrink-0 u-flex u-flex-col u-items-start">
                  <span class="u-fg-grayscale-light-1">Signed in as</span>
                  <span>Username</span>
                </div>
              </div>
            </li>
            <li role="separator"></li>
            <li>
              <a href="/" class="a-button a-button--transparent">
                Settings
              </a>
            </li>
            <li>
              <a href="/" class="a-button a-button--transparent">
                Help
              </a>
            </li>
            <li>
              <a href="/" class="a-button a-button--transparent">
                Privacy
              </a>
            </li>
            <li role="separator"></li>
            <li>
              <a href="/" class="a-button a-button--transparent">
                Sign out
              </a>
            </li>
          </ul>
        </div>
      </div>
    `}
  </Story>
</Canvas>

## Directional

The default dropdowns are aligned to the left edge of their relative parent, underneath their sibling button. Sometimes this will result in the dropdown being cut off, or extending beyond the screen’s edge. For these cases the following directional variations are available:

- `.a-dropdown--top`
- `.a-dropdown--right`
- `.a-dropdown--full-width`

<Canvas>
  <Story name="dropdown--right">
    {`
      <div style="height: 15rem; width: 12rem;">
        <div class="u-relative u-flex u-justify-end" x-data="{ dropdownOpen: false }">
          <button
            type="button"
            class="a-button a-button--secondary"
            aria-controls="dropdown-3"
            @click="dropdownOpen = !dropdownOpen"
            :aria-expanded="dropdownOpen"
          >
            <span class="a-button__label">Account [right]</span>
            <svg width="14" height="14" class="a-button__icon a-icon a-icon-m" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
              <use xlink:href="${icons}#icon-caret-down"></use>
            </svg>
          </button>
          <ul
            x-show="dropdownOpen"
            x-transition:enter="is-transitioning"
            x-transition:enter-start="is-off-screen"
            x-transition:enter-end="is-on-screen"
            x-transition:leave="is-transitioning"
            x-transition:leave-start="is-on-screen"
            x-transition:leave-end="is-off-screen"
            @click.away="dropdownOpen = false"
            id="dropdown-3"
            class="a-dropdown a-dropdown--right u-overflow-y-auto u-list-none u-margin-s2-top"
          >
            <li>
              <div class="u-padding-s4-top u-padding-s4-bottom u-padding-s2-left u-padding-s2-right u-flex u-items-center u-h6 u-line-height-min">
                <div class="a-avatar a-avatar--l u-flex-shrink-0 u-flex u-items-center u-margin-s2-right">
                  <img src="https://placehold.co/100x100" width="46" height="46" alt="Username’s avatar" />
                </div>
                <div class="u-flex-shrink-0 u-flex u-flex-col u-items-start">
                  <span class="u-fg-grayscale-light-1">Signed in as</span>
                  <span>Username</span>
                </div>
              </div>
            </li>
            <li role="separator"></li>
            <li>
              <a href="/" class="a-button a-button--transparent">
                Settings
              </a>
            </li>
            <li>
              <a href="/" class="a-button a-button--transparent">
                Help
              </a>
            </li>
            <li>
              <a href="/" class="a-button a-button--transparent">
                Privacy
              </a>
            </li>
            <li role="separator"></li>
            <li>
              <a href="/" class="a-button a-button--transparent">
                Sign out
              </a>
            </li>
          </ul>
        </div>
      </div>
    `}
  </Story>
  <Story name="dropdown--top">
    {`
      <div style="height: 15rem" class="u-flex u-flex-col>
        <div class="u-flex-grow-1"></div>
        <div class="u-relative" x-data="{ dropdownOpen: false }">
          <button
            type="button"
            class="a-button a-button--secondary"
            aria-controls="dropdown-3"
            @click="dropdownOpen = !dropdownOpen"
            :aria-expanded="dropdownOpen"
          >
            <span class="a-button__label">Account [top]</span>
            <svg width="14" height="14" class="a-button__icon a-icon a-icon-m" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
              <use xlink:href="${icons}#icon-caret-down"></use>
            </svg>
          </button>
          <ul
            x-show="dropdownOpen"
            x-transition:enter="is-transitioning"
            x-transition:enter-start="is-off-screen"
            x-transition:enter-end="is-on-screen"
            x-transition:leave="is-transitioning"
            x-transition:leave-start="is-on-screen"
            x-transition:leave-end="is-off-screen"
            @click.away="dropdownOpen = false"
            class="a-dropdown a-dropdown--top u-overflow-y-auto u-list-none u-margin-s2-bottom"
            id="dropdown-3"
          >
            <li>
              <div class="u-padding-s4-top u-padding-s4-bottom u-padding-s2-left u-padding-s2-right u-flex u-items-center u-h6 u-line-height-min">
                <div class="a-avatar a-avatar--l u-flex-shrink-0 u-flex u-items-center u-margin-s2-right">
                  <img src="https://placehold.co/100x100" width="46" height="46" alt="Username’s avatar" />
                </div>
                <div class="u-flex-shrink-0 u-flex u-flex-col u-items-start">
                  <span class="u-fg-grayscale-light-1">Signed in as</span>
                  <span>Username</span>
                </div>
              </div>
            </li>
            <li role="separator"></li>
            <li>
              <a href="/" class="a-button a-button--transparent">
                Settings
              </a>
            </li>
            <li>
              <a href="/" class="a-button a-button--transparent">
                Help
              </a>
            </li>
            <li>
              <a href="/" class="a-button a-button--transparent">
                Privacy
              </a>
            </li>
            <li role="separator"></li>
            <li>
              <a href="/" class="a-button a-button--transparent">
                Sign out
              </a>
            </li>
          </ul>
        </div>
      </div>
    `}
  </Story>
  <Story name="dropdown--full-width">
    {`
      <div style="height: 15rem; width: 20rem" class="u-flex u-flex-col">
        <div class="u-relative u-flex u-justify-end" x-data="{ dropdownOpen: false }">
          <button
            type="button"
            class="a-button a-button--secondary"
            aria-controls="dropdown-3"
            @click="dropdownOpen = !dropdownOpen"
            :aria-expanded="dropdownOpen"
          >
            <span class="a-button__label">Account [full-width]</span>
            <svg width="14" height="14" class="a-button__icon a-icon a-icon-m" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
              <use xlink:href="${icons}#icon-caret-down"></use>
            </svg>
          </button>
          <ul
            x-show="dropdownOpen"
            x-transition:enter="is-transitioning"
            x-transition:enter-start="is-off-screen"
            x-transition:enter-end="is-on-screen"
            x-transition:leave="is-transitioning"
            x-transition:leave-start="is-on-screen"
            x-transition:leave-end="is-off-screen"
            @click.away="dropdownOpen = false"
            class="a-dropdown a-dropdown--full-width u-overflow-y-auto u-list-none u-margin-s2-top"
            id="dropdown-3"
          >
            <li>
              <div class="u-padding-s4-top u-padding-s4-bottom u-padding-s2-left u-padding-s2-right u-flex u-items-center u-h6 u-line-height-min">
                <div class="a-avatar a-avatar--l u-flex-shrink-0 u-flex u-items-center u-margin-s2-right">
                  <img src="https://placehold.co/100x100" width="46" height="46" alt="Username’s avatar" />
                </div>
                <div class="u-flex-shrink-0 u-flex u-flex-col u-items-start">
                  <span class="u-fg-grayscale-light-1">Signed in as</span>
                  <span>Username</span>
                </div>
              </div>
            </li>
            <li role="separator"></li>
            <li>
              <a href="/" class="a-button a-button--transparent">
                Settings
              </a>
            </li>
            <li>
              <a href="/" class="a-button a-button--transparent">
                Help
              </a>
            </li>
            <li>
              <a href="/" class="a-button a-button--transparent">
                Privacy
              </a>
            </li>
            <li role="separator"></li>
            <li>
              <a href="/" class="a-button a-button--transparent">
                Sign out
              </a>
            </li>
          </ul>
        </div>
      </div>
    `}
  </Story>
</Canvas>

The directions can be combined.

<Canvas>
  <Story name="dropdown--top dropdown--right">
    {`
      <div style="height: 15rem; width: 12rem;" class="u-flex u-flex-col">
        <div class="u-flex-grow-1"></div>
        <div class="u-relative u-flex u-justify-end" x-data="{ dropdownOpen: false }">
          <button
            type="button"
            class="a-button a-button--secondary"
            aria-controls="dropdown-3"
            @click="dropdownOpen = !dropdownOpen"
            :aria-expanded="dropdownOpen"
          >
            <span class="a-button__label">Account [top, right]</span>
            <svg width="14" height="14" class="a-button__icon a-icon a-icon-m" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
              <use xlink:href="${icons}#icon-caret-down"></use>
            </svg>
          </button>
          <ul
            x-show="dropdownOpen"
            x-transition:enter="is-transitioning"
            x-transition:enter-start="is-off-screen"
            x-transition:enter-end="is-on-screen"
            x-transition:leave="is-transitioning"
            x-transition:leave-start="is-on-screen"
            x-transition:leave-end="is-off-screen"
            @click.away="dropdownOpen = false"
            class="a-dropdown a-dropdown--top a-dropdown--right u-overflow-y-auto u-list-none u-margin-s2-bottom"
            id="dropdown-3"
          >
            <li>
              <div class="u-padding-s4-top u-padding-s4-bottom u-padding-s2-left u-padding-s2-right u-flex u-items-center u-h6 u-line-height-min">
                <div class="a-avatar a-avatar--l u-flex-shrink-0 u-flex u-items-center u-margin-s2-right">
                  <img src="https://placehold.co/100x100" width="46" height="46" alt="Username’s avatar" />
                </div>
                <div class="u-flex-shrink-0 u-flex u-flex-col u-items-start">
                  <span class="u-fg-grayscale-light-1">Signed in as</span>
                  <span>Username</span>
                </div>
              </div>
            </li>
            <li role="separator"></li>
            <li>
              <a href="/" class="a-button a-button--transparent">
                Settings
              </a>
            </li>
            <li>
              <a href="/" class="a-button a-button--transparent">
                Help
              </a>
            </li>
            <li>
              <a href="/" class="a-button a-button--transparent">
                Privacy
              </a>
            </li>
            <li role="separator"></li>
            <li>
              <a href="/" class="a-button a-button--transparent">
                Sign out
              </a>
            </li>
          </ul>
        </div>
      </div>
    `}
  </Story>
  <Story name="dropdown--full-width dropdown--top">
    {`
      <div style="height: 20rem" class="u-flex u-flex-col">
        <div class="u-flex-grow-1"></div>
        <div class="u-relative u-flex u-justify-end" x-data="{ dropdownOpen: false }">
          <button
            type="button"
            class="a-button a-button--secondary"
            aria-controls="dropdown-3"
            @click="dropdownOpen = !dropdownOpen"
            :aria-expanded="dropdownOpen"
          >
            <span class="a-button__label">Account [full-width, top]</span>
            <svg width="14" height="14" class="a-button__icon a-icon a-icon-m" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
              <use xlink:href="${icons}#icon-caret-down"></use>
            </svg>
          </button>
          <ul
            x-show="dropdownOpen"
            x-transition:enter="is-transitioning"
            x-transition:enter-start="is-off-screen"
            x-transition:enter-end="is-on-screen"
            x-transition:leave="is-transitioning"
            x-transition:leave-start="is-on-screen"
            x-transition:leave-end="is-off-screen"
            @click.away="dropdownOpen = false"
            class="a-dropdown a-dropdown--full-width a-dropdown--top u-overflow-y-auto u-list-none u-margin-s2-bottom"
            id="dropdown-3"
          >
            <li>
              <div class="u-padding-s4-top u-padding-s4-bottom u-padding-s2-left u-padding-s2-right u-flex u-items-center u-h6 u-line-height-min">
                <div class="a-avatar a-avatar--l u-flex-shrink-0 u-flex u-items-center u-margin-s2-right">
                  <img src="https://placehold.co/100x100" width="46" height="46" alt="Username’s avatar" />
                </div>
                <div class="u-flex-shrink-0 u-flex u-flex-col u-items-start">
                  <span class="u-fg-grayscale-light-1">Signed in as</span>
                  <span>Username</span>
                </div>
              </div>
            </li>
            <li role="separator"></li>
            <li>
              <a href="/" class="a-button a-button--transparent">
                Settings
              </a>
            </li>
            <li>
              <a href="/" class="a-button a-button--transparent">
                Help
              </a>
            </li>
            <li>
              <a href="/" class="a-button a-button--transparent">
                Privacy
              </a>
            </li>
            <li role="separator"></li>
            <li>
              <a href="/" class="a-button a-button--transparent">
                Sign out
              </a>
            </li>
          </ul>
        </div>
      </div>
    `}
  </Story>
</Canvas>
