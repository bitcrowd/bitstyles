import { Canvas, Meta, Story } from '@storybook/addon-docs/blocks';
import icons from '../../../assets/images/icons.svg';

<Meta title="UI/Navigation/Dropdown menu" />

# Dropdown menu

A button that when clicked reveals a floating menu of links. This is a combination of an `.a-button--ui` as the button that is clicked to show/hide the menu, an `.a-dropdown` menu that’s the container for a series of `.a-button--menu` sub-items.

For the sake of clarity, the examples shown here are all presented with the menus already visible, but when you’re using them in a project the `.a-dropdown` must get the class `.u-hidden`. The component requires JS (not yet provided) to remove/add that class when the user clicks the `.a-button--ui`.

<details class="u-margin-xl--y">
  <summary class="u-h4 u-font--medium">Examples use</summary>
  <ul>
    <li><a href="/docs/atoms-button-base--button-element">a-button</a></li>
    <li><a href="/docs/atoms-button-ui--ui">a-button--ui</a></li>
    <li><a href="/docs/atoms-button-menu--menu">a-button--menu</a></li>
    <li><a href="/docs/atoms-dropdown--dropdown">a-dropdown</a></li>
    <li><a href="/docs/utilities-flex--flex">u-flex</a></li>
    <li><a href="/docs/utilities-box-alignment--items-center">u-items-center</a></li>
    <li><a href="/docs/atoms-icon--icon">a-icon</a></li>
    <li><a href="/docs/atoms-list-reset--list-reset">a-list-reset</a></li>
    <li><a href="/docs/utilities-typography--typography">u-h6</a></li>
    <li><a href="/docs/utilities-color--brand-1">u-fg</a></li>
    <li><a href="/docs/utilities-margin--margin-m">u-margin</a></li>
    <li><a href="/docs/utilities-overflow--overflow-y">u-overflow--y</a></li>
    <li><a href="/docs/utilities-padding--padding-m">u-padding</a></li>
    <li><a href="/docs/utilities-relative--relative">u-relative</a></li>
  </ul>
</details>

<Canvas>
  <Story name="Dropdown menu" inline={false} height="20rem">
    {`
      <div style="min-height:15rem;">
        <div class="u-relative">
          <button type="button" class="a-button a-button--ui u-h6" aria-controls="dropdown-1" aria-expanded="true">
            <span class="a-button__label">Account</span>
            <svg width="14" height="14" class="a-button__icon a-icon a-icon-m" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
              <use xlink:href="${icons}#icon-caret-down"></use>
            </svg>
          </button>
          <ul class="a-dropdown u-overflow--y a-list-reset u-margin-s--top" aria-hidden="false" id="dropdown-1">
            <li>
              <a href="/" class="a-button a-button--menu u-h6">
                <svg width="14" height="14" class="a-button__icon a-icon a-icon-m" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
                  <use xlink:href="${icons}#icon-plus"></use>
                </svg>
                <span class="a-button__label">Settings</span>
              </a>
            </li>
            <li>
              <a href="/" class="a-button a-button--menu u-h6">
                <svg width="14" height="14" class="a-button__icon a-icon a-icon-m" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
                  <use xlink:href="${icons}#icon-plus"></use>
                </svg>
                <span class="a-button__label">Help</span>
              </a>
            </li>
            <li>
              <a href="/" class="a-button a-button--menu u-h6">
                <svg width="14" height="14" class="a-button__icon a-icon a-icon-m" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
                  <use xlink:href="${icons}#icon-plus"></use>
                </svg>
                <span class="a-button__label">Privacy</span>
              </a>
            </li>
            <li role="separator"></li>
            <li>
              <a href="/" class="a-button a-button--menu u-h6">
                <svg width="14" height="14" class="a-button__icon a-icon a-icon-m" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
                  <use xlink:href="${icons}#icon-plus"></use>
                </svg>
                <span class="a-button__label">Sign out</span>
              </a>
            </li>
          </ul>
        </div>
      </div>
    `}
  </Story>
</Canvas>

The structure can be a little simpler if your menu items do not need icons. Here we’ve also added a link to the user’s profile (with their avatar) at the top of the menu.

<Canvas>
  <Story name="Dropdown with avatar user-profile link" inline={false} height="20rem">
    {`
      <div style="min-height:15rem;">
        <div class="u-relative">
          <button type="button" class="a-button a-button--ui u-h6" aria-controls="dropdown-2" aria-expanded="true">
            <span class="a-button__label">Account</span>
            <svg width="14" height="14" class="a-button__icon a-icon a-icon-m" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
              <use xlink:href="${icons}#icon-caret-down"></use>
            </svg>
          </button>
          <ul class="a-dropdown u-overflow--y a-list-reset u-margin-s--top" aria-hidden="false" id="dropdown-2">
            <li>
              <a href="/" class="a-button a-button--menu u-h6">
                <div class="a-button__avatar a-avatar a-avatar--l u-flex__shrink-0 u-flex u-items-center">
                  <img src="https://placekitten.com/100/100" width="46" height="46" alt="Username’s avatar" />
                </div>
                <div class="a-button__label u-flex u-flex--col u-items-start">
                  <span>Signed in as</span>
                  <span>Username</span>
                </div>
              </a>
            </li>
            <li role="separator"></li>
            <li>
              <a href="/" class="a-button a-button--menu u-h6">
                Settings
              </a>
            </li>
            <li>
              <a href="/" class="a-button a-button--menu u-h6">
                Help
              </a>
            </li>
            <li>
              <a href="/" class="a-button a-button--menu u-h6">
                Privacy
              </a>
            </li>
            <li role="separator"></li>
            <li>
              <a href="/" class="a-button a-button--menu u-h6">
                Sign out
              </a>
            </li>
          </ul>
        </div>
      </div>
    `}
  </Story>
</Canvas>

You can include non-link content in the menu too — this version of the avatar is not a link to a profile page, but is informing the user which account is currently signed-in.

<Canvas>
  <Story name="Dropdown with non-button/link content" inline={false} height="20rem">
    {`
      <div style="min-height:15rem;">
        <div class="u-relative">
          <button type="button" class="a-button a-button--ui u-h6" aria-controls="dropdown-3" aria-expanded="true">
            <span class="a-button__label">Account</span>
            <svg width="14" height="14" class="a-button__icon a-icon a-icon-m" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
              <use xlink:href="${icons}#icon-caret-down"></use>
            </svg>
          </button>
          <ul class="a-dropdown u-overflow--y a-list-reset u-margin-s--top" aria-hidden="false" id="dropdown-3">
            <li>
              <div class="u-padding-xs--top u-padding-xs--bottom u-padding-s--left u-padding-s--right u-flex u-items-center u-h6 u-line-height--min">
                <div class="a-avatar a-avatar--l u-flex__shrink-0 u-flex u-items-center u-margin-s--right">
                  <img src="https://placekitten.com/100/100" width="46" height="46" alt="Username’s avatar" />
                </div>
                <div class="u-flex__shrink-0 u-flex u-flex--col u-items-start">
                  <span class="u-fg--gray-40">Signed in as</span>
                  <span>Username</span>
                </div>
              </div>
            </li>
            <li role="separator"></li>
            <li>
              <a href="/" class="a-button a-button--menu u-h6">
                Settings
              </a>
            </li>
            <li>
              <a href="/" class="a-button a-button--menu u-h6">
                Help
              </a>
            </li>
            <li>
              <a href="/" class="a-button a-button--menu u-h6">
                Privacy
              </a>
            </li>
            <li role="separator"></li>
            <li>
              <a href="/" class="a-button a-button--menu u-h6">
                Sign out
              </a>
            </li>
          </ul>
        </div>
      </div>
    `}
  </Story>
</Canvas>

When you know the menu will be at the right edge of the viewport, give your dropdown `.a-dropdown--right` to align the menu flush to the right.

<Canvas>
  <Story name="Dropdown, right-aligned" inline={false} height="20rem">
    {`
      <div style="height: 15rem">
        <div class="u-relative u-flex u-justify-end">
          <button type="button" class="a-button a-button--ui u-h6" aria-controls="dropdown-3" aria-expanded="true">
            <span class="a-button__label">Account</span>
            <svg width="14" height="14" class="a-button__icon a-icon a-icon-m" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
              <use xlink:href="${icons}#icon-caret-down"></use>
            </svg>
          </button>
          <ul class="a-dropdown a-dropdown--right u-overflow--y a-list-reset u-margin-s--top" aria-hidden="false" id="dropdown-3">
            <li>
              <div class="u-padding-xs--top u-padding-xs--bottom u-padding-s--left u-padding-s--right u-flex u-items-center u-h6 u-line-height--min">
                <div class="a-avatar a-avatar--l u-flex__shrink-0 u-flex u-items-center u-margin-s--right">
                  <img src="https://placekitten.com/100/100" width="46" height="46" alt="Username’s avatar" />
                </div>
                <div class="u-flex__shrink-0 u-flex u-flex--col u-items-start">
                  <span class="u-fg--gray-40">Signed in as</span>
                  <span>Username</span>
                </div>
              </div>
            </li>
            <li role="separator"></li>
            <li>
              <a href="/" class="a-button a-button--menu u-h6">
                Settings
              </a>
            </li>
            <li>
              <a href="/" class="a-button a-button--menu u-h6">
                Help
              </a>
            </li>
            <li>
              <a href="/" class="a-button a-button--menu u-h6">
                Privacy
              </a>
            </li>
            <li role="separator"></li>
            <li>
              <a href="/" class="a-button a-button--menu u-h6">
                Sign out
              </a>
            </li>
          </ul>
        </div>
      </div>
    `}
  </Story>
</Canvas>

Give your dropdown the `.a-dropdown--top` class you need the menu to appear above the button (e.g. your dropdown is pinned to the bottom of your layout)

<Canvas>
  <Story name="Dropdown, top-aligned" inline={false} height="20rem">
    {`
      <div style="height: 20rem" class="u-flex u-flex--col">
        <div class="u-flex__grow-1"></div>
        <div class="u-relative">
          <button type="button" class="a-button a-button--ui u-h6" aria-controls="dropdown-3" aria-expanded="true">
            <span class="a-button__label">Account</span>
            <svg width="14" height="14" class="a-button__icon a-icon a-icon-m" aria-hidden="true" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
              <use xlink:href="${icons}#icon-caret-down"></use>
            </svg>
          </button>
          <ul class="a-dropdown a-dropdown--top u-overflow--y a-list-reset u-margin-s--bottom" aria-hidden="false" id="dropdown-3">
            <li>
              <div class="u-padding-xs--top u-padding-xs--bottom u-padding-s--left u-padding-s--right u-flex u-items-center u-h6 u-line-height--min">
                <div class="a-avatar a-avatar--l u-flex__shrink-0 u-flex u-items-center u-margin-s--right">
                  <img src="https://placekitten.com/100/100" width="46" height="46" alt="Username’s avatar" />
                </div>
                <div class="u-flex__shrink-0 u-flex u-flex--col u-items-start">
                  <span class="u-fg--gray-40">Signed in as</span>
                  <span>Username</span>
                </div>
              </div>
            </li>
            <li role="separator"></li>
            <li>
              <a href="/" class="a-button a-button--menu u-h6">
                Settings
              </a>
            </li>
            <li>
              <a href="/" class="a-button a-button--menu u-h6">
                Help
              </a>
            </li>
            <li>
              <a href="/" class="a-button a-button--menu u-h6">
                Privacy
              </a>
            </li>
            <li role="separator"></li>
            <li>
              <a href="/" class="a-button a-button--menu u-h6">
                Sign out
              </a>
            </li>
          </ul>
        </div>
      </div>
    `}
  </Story>
</Canvas>
