@use 'sass:color';
@use 'sass:map';
@use 'sass:math';
@use 'sass:meta';
@use 'sass:string';

// Generate palette
//
// **Generates a Sass map of colors. Each color is a `name: color` pair, with the name being the percentage as a string (one for each of the percentages in the list you pass in), and the color being the mix-color mixed into the base-color to that percentage.
//
// @param {String} $base-color  Base colour into which the other color will be mixed
//
// @param {String} $mix-color  The color to mix into the base color at different percentages
//
// @param {list} $percentages  A list of decmial values representing the percentages at which the mix-color will be mixed into the base-color

@function generate-tints-and-shades($base-color) {
  $color-map: ();

  @each $percentage in (1, 2, 3, 4, 5, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100) {
    $color-map: map.merge(
      $color-map,
      (
        '#{$percentage}':
          color.mix(
            #fff,
            $base-color,
            100% - math.percentage(math.div($percentage, 100))
          ),
      )
    );
  }

  @each $percentage in (95, 90, 80, 70, 60, 50, 40, 30, 20, 10) {
    $color-map: map.merge(
      $color-map,
      (
        '#{100 + 100 - $percentage}':
          color.mix(
            #000,
            $base-color,
            100 - math.percentage(math.div($percentage, 100))
          ),
      )
    );
  }

  @return $color-map;
}

@function generate-tints($base-color) {
  $color-map: ();

  @each $percentage in (0, 1, 2, 3, 4, 5, 10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90, 95, 100) {
    $color-map: map.merge(
      $color-map,
      (
        '#{$percentage}':
          color.mix(
            #fff,
            $base-color,
            100% - math.percentage(math.div($percentage, 100))
          ),
      )
    );
  }

  @return $color-map;
};

@function url-encode-color($color) {
  @if meta.type-of($color) == 'color' and string.index(#{$color}, '#') == 1 {
    @return '%23' + string.unquote('#{string.slice(#{$color}, 2)}');
  }

  @return $color;
}
