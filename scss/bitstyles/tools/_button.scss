@use 'sass:map';
@use '../settings/setup';
@use '../tools/properties';

@mixin _properties($properties) {
  @each $property, $value in $properties {
    #{$property}: $value;
  }
}

@mixin new($name, $states) {
  $classname: properties.classname(
    (
      setup.$namespace,
      'a',
      'button',
      $name
    )
  );

  .#{$classname} {
    @if (map.has-key($states, 'default')) {
      &,
      &:visited {
        @include _properties(map.get($states, 'default'));
      }
    }

    @if (map.has-key($states, 'hover')) {
      &:hover,
      &:focus {
        @include _properties(map.get($states, 'hover'));
      }
    }

    @if (map.has-key($states, 'active')) {
      &:active {
        @include _properties(map.get($states, 'active'));
      }
    }

    @if (map.has-key($states, 'disabled')) {
      &:disabled,
      &[aria-disabled='true'] {
        @include _properties(map.get($states, 'disabled'));
      }
    }
  }
}
