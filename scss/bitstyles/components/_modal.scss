/* @define modal */
// Modal
//
// **An accessible modal overlay which animates in & out**
//
// This needs JS to function.
//
// Set modal size using the usual layout classes e.g. `.l-content`. At smaller screensizes
// the modal becomes fullwidth.
//
// The example here uses [A11y-dialog.js](https://github.com/edenspiekermann/a11y-dialog)
// so it’s really accessible — it requires semantic markup, landmark roles and aria
// attributes in order to function, and keeps those all updated with the component’s
// current state. The basic layout & appearance styles should still function even if you’re using
// a different JS modal component.
//
// If you’re using A11y-dialog:
// - Add `data-a11y-dialog-show="dialog_ID"` to a button to make that the trigger
// to open a modal (change the id attribute to be unique!).
// - Closed the modal by clicking the darkened overlay, the close button in the top right (or any button
// in the modal’s content which you give the `data-a11y-dialog-hide` attribute), or hitting the escape key.
//
// markup:
//   <main aria-label="Content" id="main" class="l-content">
//     <p>Icing powder pie jelly beans soufflé biscuit cupcake fruitcake. Jelly beans bear claw candy canes. Chupa chups gingerbread dessert gingerbread jelly-o icing topping. Marshmallow tiramisu tiramisu cheesecake. Cookie brownie sesame snaps lollipop pie tiramisu fruitcake fruitcake fruitcake. Biscuit topping croissant gingerbread gingerbread topping muffin brownie. Jelly toffee danish fruitcake. Liquorice fruitcake bonbon. Bear claw pudding bonbon jujubes. Danish icing sweet. Biscuit jelly marzipan pie tart. Sugar plum danish gingerbread powder cupcake ice cream sugar plum. Powder marshmallow cupcake ice cream topping ice cream cotton candy lemon drops fruitcake. Chocolate cake wafer jelly beans cupcake lemon drops.</p>
//     <p class="t-text-align--center"><button class="o-link" data-a11y-dialog-show="dialog_1">open dialogue</button></p>
//     <p>Icing powder pie jelly beans soufflé biscuit cupcake fruitcake. Jelly beans bear claw candy canes. Chupa chups gingerbread dessert gingerbread jelly-o icing topping. Marshmallow tiramisu tiramisu cheesecake. Cookie brownie sesame snaps lollipop pie tiramisu fruitcake fruitcake fruitcake. Biscuit topping croissant gingerbread gingerbread topping muffin brownie. Jelly toffee danish fruitcake. Liquorice fruitcake bonbon. Bear claw pudding bonbon jujubes. Danish icing sweet. Biscuit jelly marzipan pie tart. Sugar plum danish gingerbread powder cupcake ice cream sugar plum. Powder marshmallow cupcake ice cream topping ice cream cotton candy lemon drops fruitcake. Chocolate cake wafer jelly beans cupcake lemon drops.</p>
//   </main>
//   <div class="c-modal" id="dialog_1" aria-hidden="true">
//     <div class="c-modal__overlay" tabindex="-1" data-a11y-dialog-hide></div>
//     <div class="l-content c-modal__content" role="dialog" aria-labelledby="dialog-title">
//       <div role="document">
//         <h1 class="o-h1" id="dialog-title" tabindex="0">Dialog Title</h1>
//         <p>Icing powder pie jelly beans soufflé biscuit cupcake fruitcake. Jelly beans bear claw candy canes. Chupa chups gingerbread dessert gingerbread jelly-o icing topping. Marshmallow tiramisu tiramisu cheesecake. Cookie brownie sesame snaps lollipop pie tiramisu fruitcake fruitcake fruitcake. Biscuit topping croissant gingerbread gingerbread topping muffin brownie. Jelly toffee danish fruitcake. Liquorice fruitcake bonbon. Bear claw pudding bonbon jujubes. Danish icing sweet. Biscuit jelly marzipan pie tart. Sugar plum danish gingerbread powder cupcake ice cream sugar plum. Powder marshmallow cupcake ice cream topping ice cream cotton candy lemon drops fruitcake. Chocolate cake wafer jelly beans cupcake lemon drops.</p>
//         <p>Gummies cake topping ice cream dessert. Jelly beans marzipan toffee biscuit cookie lollipop cake pie. Apple pie sweet bonbon candy jujubes. Gummi bears biscuit cheesecake marshmallow chupa chups danish carrot cake. Cookie croissant ice cream bonbon ice cream. Cotton candy halvah bear claw. Pudding apple pie tootsie roll gummi bears halvah icing jelly-o jelly beans. Jujubes lemon drops macaroon wafer tart dragée. Gummies danish lollipop cupcake oat cake. Ice cream candy canes brownie chocolate bar pie macaroon biscuit tootsie roll. Tootsie roll carrot cake fruitcake. Wafer chupa chups jelly beans. Pie cake jujubes caramels wafer.</p>
//         <button class="o-button c-modal__close" type="button" data-a11y-dialog-hide aria-label="Close this dialog window">
//           &times;
//         </button>
//       </div>
//     </div>
//   </div>
//

@import '../settings/modal';

@mixin modal-is-hidden {
  opacity: 0;
  visibility: hidden;
}

.#{$bitstyles-namespace}c-modal__overlay {
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: 10;
  cursor: pointer;
  background: $bitstyles-modal-overlay-color;
  transition: all $bitstyles-modal-transition-duration $bitstyles-modal-transition-easing;
  -webkit-backface-visibility: hidden; // stylelint-disable-line property-no-vendor-prefix
  backface-visibility: hidden;
  will-change: $bitstyles-modal-will-change;

  [aria-hidden="true"] & {
    @include modal-is-hidden;

    transition: all $bitstyles-modal-transition-duration $bitstyles-modal-transition-easing, visibility 0 $bitstyles-modal-transition-easing $bitstyles-modal-transition-duration;
  }
}

.#{$bitstyles-namespace}c-modal__content {
  position: fixed;
  top: 50%;
  left: 50%;
  z-index: 20;
  width: 100%;
  height: 100%;
  max-height: 100vh;
  padding-top: $bitstyles-modal-padding;
  padding-bottom: $bitstyles-modal-padding;
  overflow: scroll;
  -webkit-overflow-scrolling: touch;
  background-color: $bitstyles-modal-background-color;
  border-radius: $bitstyles-modal-border-radius;
  transform: translate(-50%, -50%);
  transform-origin: 50% 50%;
  transition: all $bitstyles-modal-transition-duration-smallscreen $bitstyles-modal-transition-easing;
  -webkit-backface-visibility: hidden; // stylelint-disable-line property-no-vendor-prefix
  backface-visibility: hidden;
  will-change: $bitstyles-modal-will-change;

  [aria-hidden="true"] & {
    @include modal-is-hidden;

    transform: translate(-50%, 50%);
    transition: all $bitstyles-modal-transition-duration-smallscreen $bitstyles-modal-transition-easing, visibility 0 $bitstyles-modal-transition-easing $bitstyles-modal-transition-duration;
  }
}

@include media-query($bitstyles-modal-breakpoint) {
  .#{$bitstyles-namespace}c-modal__content {
    width: calc(100% - 2 * #{$bitstyles-modal-padding});
    height: auto;
    transition: all $bitstyles-modal-transition-duration $bitstyles-modal-transition-easing, visibility 0 $bitstyles-modal-transition-easing;

    [aria-hidden="true"] & {
      transform: translate(-50%, -50%) scale(0.875);
      transition: all $bitstyles-modal-transition-duration $bitstyles-modal-transition-easing, visibility 0 $bitstyles-modal-transition-easing $bitstyles-modal-transition-duration;
    }
  }
}

.#{$bitstyles-namespace}c-modal__close {
  position: absolute;
  top: $bitstyles-modal-padding;
  right: $bitstyles-modal-padding;
}

// Modal dialog
//
// **An accessible modal overlay which animates in & out**
//
// This needs JS to function.
//
// Set modal size using the usual layout classes e.g. `.l-content`. At smaller screensizes
// the modal becomes fullwidth.
//
// As with the standard modal we’re using [A11y-dialog.js](https://github.com/edenspiekermann/a11y-dialog)
// so it’s really accessible — it requires semantic markup, landmark roles and aria
// attributes in order to function, and keeps those all updated with the component’s
// current state. The basic layout & appearance styles should still function even if you’re using
// a different JS modal component.
//
// Using the `modal-variation` mixin we can provide different animations depending
// on which of several buttons in the modal content the user clicks. Here we have
// ‘cancel’ and ‘ok’ buttons, with animations to emphasise the meaning of the chosen action
// (use JS to add the correct class to the modal element based on which button is clicked).
//
// If you’re using A11y-dialog:
// - Add `data-a11y-dialog-show="dialog_ID"` to a button to make that the trigger
// to open a modal (change the id attribute to be unique!).
// - Closed the modal by clicking the darkened overlay, the close button in the top right (or any button
// in the modal’s content which you give the `data-a11y-dialog-hide` attribute), or hitting the escape key.
//
// markup:
//   <main aria-label="Content" id="main" class="l-content">
//     <p>Icing powder pie jelly beans soufflé biscuit cupcake fruitcake. Jelly beans bear claw candy canes. Chupa chups gingerbread dessert gingerbread jelly-o icing topping. Marshmallow tiramisu tiramisu cheesecake. Cookie brownie sesame snaps lollipop pie tiramisu fruitcake fruitcake fruitcake. Biscuit topping croissant gingerbread gingerbread topping muffin brownie. Jelly toffee danish fruitcake. Liquorice fruitcake bonbon. Bear claw pudding bonbon jujubes. Danish icing sweet. Biscuit jelly marzipan pie tart. Sugar plum danish gingerbread powder cupcake ice cream sugar plum. Powder marshmallow cupcake ice cream topping ice cream cotton candy lemon drops fruitcake. Chocolate cake wafer jelly beans cupcake lemon drops.</p>
//     <p class="t-text-align--center"><button class="o-link" data-a11y-dialog-show="dialog_1">open dialogue</button></p>
//     <p>Icing powder pie jelly beans soufflé biscuit cupcake fruitcake. Jelly beans bear claw candy canes. Chupa chups gingerbread dessert gingerbread jelly-o icing topping. Marshmallow tiramisu tiramisu cheesecake. Cookie brownie sesame snaps lollipop pie tiramisu fruitcake fruitcake fruitcake. Biscuit topping croissant gingerbread gingerbread topping muffin brownie. Jelly toffee danish fruitcake. Liquorice fruitcake bonbon. Bear claw pudding bonbon jujubes. Danish icing sweet. Biscuit jelly marzipan pie tart. Sugar plum danish gingerbread powder cupcake ice cream sugar plum. Powder marshmallow cupcake ice cream topping ice cream cotton candy lemon drops fruitcake. Chocolate cake wafer jelly beans cupcake lemon drops.</p>
//   </main>
//   <div class="c-modal" id="dialog_1" aria-hidden="true">
//     <div class="c-modal__overlay" tabindex="-1" data-a11y-dialog-hide></div>
//     <div class="l-content c-modal__content" role="dialog" aria-labelledby="dialog-title">
//       <div role="document">
//         <h1 class="o-h1" id="dialog-title" tabindex="0">Dialog Title</h1>
//         <p>Icing powder pie jelly beans soufflé biscuit cupcake fruitcake. Jelly beans bear claw candy canes. Chupa chups gingerbread dessert gingerbread jelly-o icing topping. Marshmallow tiramisu tiramisu cheesecake. Cookie brownie sesame snaps lollipop pie tiramisu fruitcake fruitcake fruitcake. Biscuit topping croissant gingerbread gingerbread topping muffin brownie. Jelly toffee danish fruitcake. Liquorice fruitcake bonbon. Bear claw pudding bonbon jujubes. Danish icing sweet. Biscuit jelly marzipan pie tart. Sugar plum danish gingerbread powder cupcake ice cream sugar plum. Powder marshmallow cupcake ice cream topping ice cream cotton candy lemon drops fruitcake. Chocolate cake wafer jelly beans cupcake lemon drops.</p>
//         <p>Gummies cake topping ice cream dessert. Jelly beans marzipan toffee biscuit cookie lollipop cake pie. Apple pie sweet bonbon candy jujubes. Gummi bears biscuit cheesecake marshmallow chupa chups danish carrot cake. Cookie croissant ice cream bonbon ice cream. Cotton candy halvah bear claw. Pudding apple pie tootsie roll gummi bears halvah icing jelly-o jelly beans. Jujubes lemon drops macaroon wafer tart dragée. Gummies danish lollipop cupcake oat cake. Ice cream candy canes brownie chocolate bar pie macaroon biscuit tootsie roll. Tootsie roll carrot cake fruitcake. Wafer chupa chups jelly beans. Pie cake jujubes caramels wafer.</p>
//         <button class="o-button" type="button" id="#cancel_button">Cancel</button>
//         <button class="o-button" type="button" id="#ok_button">Ok</button>
//       </div>
//     </div>
//   </div>
//

@mixin modal-variation($state) {
  .#{$bitstyles-namespace}c-modal--animation-#{$state} {
    &[aria-hidden="true"] {
      .#{$bitstyles-namespace}c-modal__content {
        @content;
      }
    }
  }
}

@include modal-variation(cancel) {
  transform: translate(-50%, 50%);
}

@include modal-variation(ok) {
  opacity: 1;
  transform: translate(-50%, -200%);
}
