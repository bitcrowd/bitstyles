@use 'sass:map';
@use 'sass:math';
@use './settings';
@use '../../tools/directional-properties';
@use '../../tools/media-query';

@mixin card($padding) {
  padding: $padding;
  overflow: hidden;
  border-radius: settings.$border-radius;
  box-shadow: settings.$box-shadow;
}

@mixin card__header($spacing) {
  margin: (- $spacing) (- $spacing) math.div($spacing, 2);
  padding: math.div($spacing, 2) $spacing;
  background-color: settings.$header-background-color;
}

@include directional-properties.output-block(
  $object-level: 'a',
  $classname-root: 'card'
) {
  @include card(map.get(settings.$sizes, 'base'));
}

@include directional-properties.output-block(
  $object-level: 'a',
  $classname-root: 'card__header'
) {
  @include card__header(map.get(settings.$sizes, 'base'));
}

@each $size-name, $padding-size in map.remove(settings.$sizes, 'base') {
  @include directional-properties.output-block(
    $object-level: 'a',
    $classname-root: 'card--#{$size-name}'
  ) {
    @include card($padding-size);
  }

  @include directional-properties.output-block(
    $object-level: 'a',
    $classname-root: 'card--#{$size-name}__header'
  ) {
    @include card__header($padding-size);
  }
}

@each $breakpoint-alias in settings.$breakpoints {
  @include media-query.media-query($breakpoint-alias) {
    @include directional-properties.output-block(
      $object-level: 'a',
      $classname-root: 'card',
      $breakpoint-suffix: '\\\@#{$breakpoint-alias}'
    ) {
      @include card(map.get(settings.$sizes, 'base'));
    }

    @include directional-properties.output-block(
      $object-level: 'a',
      $classname-root: 'card__header',
      $breakpoint-suffix: '\\\@#{$breakpoint-alias}'
    ) {
      @include card__header(map.get(settings.$sizes, 'base'));
    }
    @each $size-name, $padding-size in settings.$sizes {
      @include directional-properties.output-block(
        $object-level: 'a',
        $classname-root: 'card--#{$size-name}',
        $breakpoint-suffix: '\\\@#{$breakpoint-alias}'
      ) {
        @include card($padding-size);
      }

      @include directional-properties.output-block(
        $object-level: 'a',
        $classname-root: 'card--#{$size-name}__header',
        $breakpoint-suffix: '\\\@#{$breakpoint-alias}'
      ) {
        @include card__header($padding-size);
      }
    }
  }
}
