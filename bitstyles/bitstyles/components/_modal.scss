/* @define modal */
// Modal
//
// Needs JS to function. This is a modal overlay which animates in & out.
//
// markup:
//   <main aria-label="Content" id="main" class="l-content">
//     <p>Icing powder pie jelly beans soufflé biscuit cupcake fruitcake. Jelly beans bear claw candy canes. Chupa chups gingerbread dessert gingerbread jelly-o icing topping. Marshmallow tiramisu tiramisu cheesecake. Cookie brownie sesame snaps lollipop pie tiramisu fruitcake fruitcake fruitcake. Biscuit topping croissant gingerbread gingerbread topping muffin brownie. Jelly toffee danish fruitcake. Liquorice fruitcake bonbon. Bear claw pudding bonbon jujubes. Danish icing sweet. Biscuit jelly marzipan pie tart. Sugar plum danish gingerbread powder cupcake ice cream sugar plum. Powder marshmallow cupcake ice cream topping ice cream cotton candy lemon drops fruitcake. Chocolate cake wafer jelly beans cupcake lemon drops <button class="o-link" data-a11y-dialog-show="dialog_1">open dialogue</button>.</p>
//     <p>Icing powder pie jelly beans soufflé biscuit cupcake fruitcake. Jelly beans bear claw candy canes. Chupa chups gingerbread dessert gingerbread jelly-o icing topping. Marshmallow tiramisu tiramisu cheesecake. Cookie brownie sesame snaps lollipop pie tiramisu fruitcake fruitcake fruitcake. Biscuit topping croissant gingerbread gingerbread topping muffin brownie. Jelly toffee danish fruitcake. Liquorice fruitcake bonbon. Bear claw pudding bonbon jujubes. Danish icing sweet. Biscuit jelly marzipan pie tart. Sugar plum danish gingerbread powder cupcake ice cream sugar plum. Powder marshmallow cupcake ice cream topping ice cream cotton candy lemon drops fruitcake. Chocolate cake wafer jelly beans cupcake lemon drops.</p>
//   </main>
//   <div class="c-modal" id="dialog_1" aria-hidden="true">
//     <div class="c-modal__overlay" tabindex="-1" data-a11y-dialog-hide></div>
//     <div class="l-content c-modal__content" role="dialog" aria-labelledby="dialog-title">
//       <div role="document">
//         <h1 class="o-h1" id="dialog-title" tabindex="0">Dialog Title</h1>
//         <p>Icing powder pie jelly beans soufflé biscuit cupcake fruitcake. Jelly beans bear claw candy canes. Chupa chups gingerbread dessert gingerbread jelly-o icing topping. Marshmallow tiramisu tiramisu cheesecake. Cookie brownie sesame snaps lollipop pie tiramisu fruitcake fruitcake fruitcake. Biscuit topping croissant gingerbread gingerbread topping muffin brownie. Jelly toffee danish fruitcake. Liquorice fruitcake bonbon. Bear claw pudding bonbon jujubes. Danish icing sweet. Biscuit jelly marzipan pie tart. Sugar plum danish gingerbread powder cupcake ice cream sugar plum. Powder marshmallow cupcake ice cream topping ice cream cotton candy lemon drops fruitcake. Chocolate cake wafer jelly beans cupcake lemon drops.</p>
//         <p>Gummies cake topping ice cream dessert. Jelly beans marzipan toffee biscuit cookie lollipop cake pie. Apple pie sweet bonbon candy jujubes. Gummi bears biscuit cheesecake marshmallow chupa chups danish carrot cake. Cookie croissant ice cream bonbon ice cream. Cotton candy halvah bear claw. Pudding apple pie tootsie roll gummi bears halvah icing jelly-o jelly beans. Jujubes lemon drops macaroon wafer tart dragée. Gummies danish lollipop cupcake oat cake. Ice cream candy canes brownie chocolate bar pie macaroon biscuit tootsie roll. Tootsie roll carrot cake fruitcake. Wafer chupa chups jelly beans. Pie cake jujubes caramels wafer.</p>
//         <button class="o-button c-modal__close" type="button" data-a11y-dialog-hide aria-label="Close this dialog window">
//           &times;
//         </button>
//         <button class="o-button" type="button" id="#cancel_button">Cancel</button>
//         <button class="o-button" type="button" id="#ok_button">Ok</button>
//       </div>
//     </div>
//   </div>
//
// Styleguide 6.1

@import '../settings/modal';

@mixin modal-is-hidden {
  opacity: 0;
  visibility: hidden;
}

.#{$bitstyles-namespace}c-modal__overlay {
  will-change: $bitstyles-modal-will-change;
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: 10;
  background: $bitstyles-modal-overlay-color;
  transition: all $bitstyles-modal-transition-duration $bitstyles-modal-transition-easing;
  backface-visibility: hidden;
  cursor: pointer;

  [aria-hidden="true"] & {
    @include modal-is-hidden;
    transition: all $bitstyles-modal-transition-duration $bitstyles-modal-transition-easing, visibility 0 $bitstyles-modal-transition-easing $bitstyles-modal-transition-duration;
  }
}

.#{$bitstyles-namespace}c-modal__content {
  will-change: $bitstyles-modal-will-change;
  position: fixed;
  top: 50%;
  left: 50%;
  z-index: 20;
  width: 100%;
  max-height: 100vh;
  padding-top: $bitstyles-spacing;
  padding-bottom: $bitstyles-spacing;
  overflow: scroll;
  -webkit-overflow-scrolling: touch;
  background-color: $bitstyles-modal-background-color;
  transform: translate(-50%, -50%);
  transform-origin: 50% 50%;
  transition: all $bitstyles-modal-transition-duration-smallscreen $bitstyles-modal-transition-easing;
  -webkit-backface-visibility: hidden; // stylelint-disable-line property-no-vendor-prefix
  backface-visibility: hidden;

  [aria-hidden="true"] & {
    @include modal-is-hidden;
    transform: translate(-50%, 50%);
    transition: all $bitstyles-modal-transition-duration-smallscreen $bitstyles-modal-transition-easing, visibility 0 $bitstyles-modal-transition-easing $bitstyles-modal-transition-duration;
  }
}

@include media-query(small) {
  .#{$bitstyles-namespace}c-modal__content {
    [aria-hidden="true"] & {
      opacity: 1;
    }
  }
}

@include media-query(medium-and-up) {
  .#{$bitstyles-namespace}c-modal__content {
    width: calc(100% - 2 * #{$bitstyles-spacing});
    transition: all $bitstyles-modal-transition-duration $bitstyles-modal-transition-easing, visibility 0 $bitstyles-modal-transition-easing;

    [aria-hidden="true"] & {
      transform: translate(-50%, -50%) scale(0.875);
      transition: all $bitstyles-modal-transition-duration $bitstyles-modal-transition-easing, visibility 0 $bitstyles-modal-transition-easing $bitstyles-modal-transition-duration;
    }
  }
}

.#{$bitstyles-namespace}c-modal__close {
  position: absolute;
  top: $bitstyles-spacing;
  right: $bitstyles-spacing;
}

@mixin modal-variation($state) {
  .#{$bitstyles-namespace}c-modal--animation-#{$state} {
    &[aria-hidden="true"] {
      .#{$bitstyles-namespace}c-modal__content {
        @content;
      }
    }
  }
}

@include modal-variation(cancel) {
  transform: translate(-50%, 50%);
}

@include modal-variation(ok) {
  opacity: 1;
  transform: translate(-50%, -200%);
}
